<div class='sidenav pull-left'>
    <div class='nav-logo'>
    <img src="img/icons/coding_dojo.png">
  </div>
  <ul>
    <li><a href="/#/dashboard"><button class='sidenav-box'><img src="img/icons/dash.png"><br>Dashboard</button></a></li>
    <li><a href="/#/history"><button class='sidenav-box'><img src="img/icons/history.png"><br>History</button></a></li>
    <li><a href="/#/settings"><button class='sidenav-box'><img src="img/icons/settings.png"><br>Settings</button></a></li>
    <li><button class='sidenav-box' ng-click='logout()'><img src="img/icons/logout.png"><br>Logout</button></li>
  </ul>
</div>
<div class='a_d'>
  <h2 align='center' ng-if="update == true">Update Employee</h2>
  <h2 align='center' ng-if="update == false">Add Employee</h2>
</div>
<div class='container-fluid main'>
  <div ng-if="serverError !== null" ng-bind="serverError"></div>
  <form name="employeeForm" ng-submit="submitForm(employeeForm.$valid)" novalidate>
    <table class='table add_table'>
      <tbody>
        <tr>
          <td>
            <label for="inputName">Name*</label>
          </td>
          <td>
            <input type="text" ng-model="form.name" ng-pattern="pattern.letter" ngTrim="true" name="name" id="inputName" class="form-control" placeholder="Name" required autofocus />
            <div ng-messages="employeeForm.name.$error" ng-if="employeeForm.$submitted || !employeeForm.name.$pristine">
              <p ng-message="required" class="help-block">Name is required</p>
              <p ng-message="pattern" class="help-block">Only letters</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputEmail">Email*</label>
          </td>
          <td>
            <input type="email" ng-model="form.email" ng-pattern="pattern.email" ngTrim="true" name="email" id="inputEmail" class="form-control" placeholder="Email (Used for Login)" required />
            <div ng-messages="employeeForm.email.$error" ng-if="employeeForm.$submitted || !employeeForm.email.$pristine">
              <p ng-message="required" class="help-block">Email is required.</p>
              <p ng-message="pattern" class="help-block">Invalid email.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputPassword">Password*</label>
          </td>
          <td ng-if="update == false">

            <input type="password" ng-model="form.password" ng-change="isMatch()" ng-pattern="pattern.password" name="password" id="inputPassword" class="form-control" placeholder="Password" ng-minlength="6" ng-maxlength="72" required />

            <label for="inputConfirm" class="sr-only">Confirm Password</label>
            <input type="password" ng-model="form.confirm" ng-change="isMatch()" name="confirm" id="confirm" class="form-control" placeholder="Confirm Password" id="inputConfirm" required />

            <div ng-messages="employeeForm.password.$error" ng-if="employeeForm.$submitted || !employeeForm.password.$pristine">
              <p ng-message="required" class="help-block">Password is required.</p>
              <p ng-message="minlength" class="help-block">Password is too short.</p>
              <p ng-message="maxlength" class="help-block">Password is too long.</p>
              <p ng-message="pattern" class="help-block">Password can containe letters and numbers only.</p>
            </div>
            <div ng-messages="employeeForm.confirm.$error" ng-if="employeeForm.password.$valid && !employeeForm.confirm.$pristine">
              <p ng-message="required" class="help-block">Password confirmation is required.</p>
              <p ng-message="match" class="help-block">Password doesn't match</p>
            </div>
          </td>
          <td ng-if="update == true">

            <input type="password" ng-model="form.password" ng-change="isMatch()" ng-pattern="pattern.password" name="password" id="inputPassword" class="form-control" placeholder="Password" ng-minlength="6" ng-maxlength="72"/>

            <label for="inputConfirm" class="sr-only">Confirm Password</label>
            <input type="password" ng-model="form.confirm" ng-change="isMatch()" name="confirm" id="confirm" class="form-control" placeholder="Confirm Password" id="inputConfirm"/>

            <div ng-messages="employeeForm.password.$error" ng-if="employeeForm.$submitted || !employeeForm.password.$pristine">
              <p ng-message="minlength" class="help-block">Password is too short.</p>
              <p ng-message="maxlength" class="help-block">Password is too long.</p>
              <p ng-message="pattern" class="help-block">Password can containe letters and numbers only.</p>
            </div>
            <div ng-messages="employeeForm.confirm.$error" ng-if="employeeForm.$submitted || !employeeForm.confirm.$pristine">
              <p ng-message="required" class="help-block">Password confirmation is required.</p>
              <p ng-message="match" class="help-block">Password doesn't match</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputFile">Upload Profile Picture</label>
          </td>
          <td>
            <span id='file'>
            <!-- to use the directive file-model is used -->
              <input type="file" file-model="form.imgFile" ng-model="form.pic" name="pic_path" id="inputFile" />
            </span>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputStartDate">Employee Start Date*</label>
          </td>
          <td>
            <input type="date" ng-model="form.start_date" name="start_date" id="inputStartDate" placeholder="yyyy-MM-dd" required />
            <div ng-messages="employeeForm.start_date.$error" ng-if="employeeForm.$submitted || !employeeForm.start_date.$pristine">
              <p ng-message="required" class="help-block">Start Date is required.</p>
              <p ng-message="date" class="help-block">Not a valid date.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputStatus">Employee Status*</label>
          </td>
          <td>
            <select type="button" ng-model="form.status" name="status" id="inputStatus" class="drop-btn dropdown-toggle btn btn-lg" required>
              <option value="" disabled selected>Status</option>
              <option value="active" ng-selected="status == 'active'">Active</option>
              <option value="inactive" ng-selected="status == 'inactive'">Inactive</option>
              <option value="probation" ng-selected="status == 'probation'">Probation</option>
              <option value="suspended" ng-selected="status == 'suspended'">Suspended</option>
              <option value="terminated" ng-selected="status == 'terminated'">Terminated</option>
              <option value="vacation" ng-selected="status == 'vacation'">Vacation</option>
            </select>
            <div ng-messages="employeeForm.status.$error" ng-if="employeeForm.$submitted || !employeeForm.status.$pristine">
              <p ng-message="required" class="help-block">Status is required.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputSupervisor">Supervisor*</label>
          </td>
          <td>
            <select type='button' ng-model="form.supervisor" name="supervisor" id="inputSupervisor" class='drop-btn dropdown-toggle btn btn-lg' required>
              <option value="" disabled selected>Supervisor</option>
              <option value="{{s.id}}" ng-repeat="s in supervisors" ng-bind="s.name" ng-selected="s.id == form.supervisor"></option>
            </select>
            <div ng-messages="employeeForm.supervisor.$error" ng-if="employeeForm.$submitted || !employeeForm.supervisor.$pristine">
              <p ng-message="required" class="help-block">Supervisor is required.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputTeam">Team</label>
          </td>
          <td>
            <input type="text" ng-model="form.team" ngTrim="true" ng-pattern="pattern.lettersNumbers" name="team" id="inputTeam" class="form-control" placeholder="Team" />
            <div ng-messages="employeeForm.team.$error" ng-if="employeeForm.$submitted || !employeeForm.team.$pristine">
              <p ng-message="pattern" class="help-block">Team can only have letters and numbers.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputTitle">Title*</label>
          </td>
          <td>
            <input type="text" ng-model="form.title" ng-pattern="pattern.lettersNumbers" ngTrim="true" name="title" id="inputTitle" class="form-control" placeholder="Title" required/>
            <div ng-messages="employeeForm.title.$error" ng-if="employeeForm.$submitted || !employeeForm.title.$pristine">
              <p ng-message="required" class="help-block">Title is required.</p>
              <p ng-message="pattern" class="help-block">Title can only have letters and numbers.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for="inputLocation">Location*</label>
          </td>
          <td>
            <select type='button' ng-model="form.location" name="location" id="inputLocation" class='drop-btn dropdown-toggle btn btn-lg' required>
              <option value="" disabled selected>Location</option>
              <option ng-repeat="l in locations" value="{{l.id}}" ng-bind="l.name"></option>
            </select>
            <div ng-messages="employeeForm.location.$error" ng-if="employeeForm.$submitted || !employeeForm.location.$pristine">
              <p ng-message="required" class="help-block">Location is required.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <label for='inputNote'>Notes</label>
          </td>
          <td>
            <textarea ng-model="form.note" ngTrim="true" ng-pattern="pattern.lettersNumbers" name="note" id="inputNote" class='form-control' placeholder='Notes (only visible to admins)'></textarea>
          </td>
          <div ng-messages="employeeForm.note.$error" ng-if="employeeForm.$submitted || !employeeForm.note.$pristine">
            <p ng-message="pattern" class="help-block">Title can only have letters and numbers.</p>
          </div>
        </tr>
        <tr>
          <td colspan="2">
            <div class="checkbox">
              <label>
                <input type="checkbox" ng-model="form.type" ng-true-value="1" ng-false-value="0" ng-checked="admin" name="admin" id="inputAdmin">Admin <span class='emphasis'>*Be careful who you give admin access to*</span>
              </label>
            </div>
            <button type="submit" ng-if="update == true"  class="btn btn-lg btn-in pull-right">Update</button>
            <button type="submit" ng-if="update == false" class="btn btn-lg btn-in pull-right">Add Employee</button>
          </td>
        </tr>                                    
      </tbody>
    </table>
  </form>
</div>