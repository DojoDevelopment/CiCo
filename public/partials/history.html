<div class='sidenav pull-left'>
    <div class='nav-logo'>
    <img src="img/icons/coding_dojo.png">
  </div>
  <ul>
    <li><a href="/#/add_employee"><button class='sidenav-box'><img src="img/icons/people.png"><br>Add Employee</button></a></li>
    <li><a href="/#/dashboard"><button class='sidenav-box'><img src="img/icons/dash.png"><br>Dashboard</button></a></li>
    <li><button class='sidenav-box' ng-click='toggleModal()'><img src="img/icons/settings.png"><br>Settings</button></li>
    <li><button class='sidenav-box' ng-click='logout()'><img src="img/icons/logout.png"><br>Logout</button></li>      
  </ul>
</div>
<div class='a_d'>
  <h2 align='center'>Time Keeper - Admin History</h2>
</div>
<div class='container-fluid main'>

  <div class='container-fluid row'>
    
      <div class='pull-left'>
    
    <form>
      <input type='date' ng-model="from_date"> to <input type='date' ng-model="to_date">
      <button type='submit' ng-click="dateFilter(from_date, to_date)" class='pull-right btn btn-sm btn-date'>Filter by Date</button>
    </form>

  </div>

  <div class='pull-right'>

    <div class='container-sm'>
      <div style='margin-bottom:7px; margin-left:26px;'>
        <select class='test' ng-model="place">
          <option value="" disabled selected>Filter Location</option>
          <option value="">All</option>
          <option ng-repeat="l in locations" value="{{l.name}}" ng-bind="l.name"></option>
        </select>

        <select style='margin-left:69px;' ng-model="people">
          <option value="" disabled selected>Filter Name</option>
          <option value="">All</option>
          <option ng-repeat="m in members | filter:m" value="{{m.name}}" ng-bind="m.name"></option>
        </select>
      </div>

      <div style='margin-bottom:-18px; margin-left:-10px;'class='pull-right'>
        <ul>
          <li><a tabindex='1' ng-click="dateFilter('all')">All</a></li>
          <li><a tabindex='2' ng-click="dateFilter('this_week')">This week</a></li>
          <li><a tabindex='3' ng-click="dateFilter('last_week')">Last week</a></li>
          <li><a tabindex='4' ng-click="dateFilter('this_month')">This month</a></li>
          <li><a tabindex='5' ng-click="dateFilter('last_month')">Last Month</a></li>
        </ul>
      </div>
    </div>
  </div>     

  </div>

  <div class='container-sm table-wrap'>

    <table fixed-header table-height='40em' class='table table-striped time-table'>
      <thead>

        <tr>
          <th><a href="" ng-click="order='date'; reverse=!reverse">Date</a></th>
          <th><a href="" ng-click="order='name'; reverse=!reverse">Name</a></th>
          <th><a href="" ng-click="order='title'; reverse=!reverse">Title</a></th>
          <th><a href="" ng-click="order='team'; reverse=!reverse">Team</a></th>
          <th><a href="" ng-click="order='location'; reverse=!reverse">Location</a></th>
          <th class='clk-btn'><a href="" ng-click="order='clock_in'; reverse=!reverse">Clock IN</a></th>
          <th class='clk-btn'><a href="" ng-click="order='clock_out'; reverse=!reverse">Clock OUT</a></th>
          <th><a href="" ng-click="order='personal'; reverse=!reverse">Personal Time</a></th>
          <th><a href="" ng-click="order='billed'; reverse=!reverse">Billed Hours</a></th>
          <th>Report</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="row in history_table | filter: { locations:place, name:people } | orderBy:order:reverse">
          <td id='date' ng-bind="row.clock_in | date:'dd/M (EEE)'"></td>
          <td ng-if="row.picture != null"><img height='30' width='30' class='img-rounded' ng-src="/img/profile_pic/{{biz_id}}/{{row.picture}}" />{{row.name}}</td>
          <td ng-if="row.picture == null"><img height='30' width='30' class='img-rounded' src="/img/profile_pic/anon.png" />{{row.name}}</td>
          <td id='title'    ng-bind="row.title"></td>
          <td id='team'     ng-bind="row.team"></td>
          <td id='location' ng-bind="row.locations"></td>
          <td id='in'       ng-bind="row.clock_in | date:'shortTime'"></td>
          <td id='out'      ng-bind="row.clock_out | date:'shortTime'"></td>
          <td id='pt'       ng-bind="row.personal_time"></td>
          <td id='billed'   ng-bind="row.billed"></td>
          <td id='report'   ng-bind="row.report"></td>
        </tr>
      </tbody>

    </table>
    <button class="btn btn-danger" ng-csv="csvBody" csv-header="csvHead" filename="history.csv" ng-if="user.page=='history'">Download CSV</button>
  </div>

</div>
<!--************************  SETTINGS MODAL CONTENT *******************************-->
<modal-dialog show='modalShown' width='750px'>
<div class='container modal-settings'>
  <nav class='navbar navbar-fixed-top navbar-inverse'>
    <h1 align='center'>Edit Settings</h1>
  </nav>
  <form>
    Company Name:<label for="inputCompany" class="sr-only">Company Name</label>
    <input ng-model="business.name" class="form-control" placeholder="example: Coding Dojo" type="text" required autofocus>

    On-Site IP Address:<label for='ipAdd' class='sr-only'>On-Site IP Addresses</label>
    <textarea ng-model='business.ip_addresses' class='form-control' placeholder='Separate by comma - example: 192.168.2.1, 192.128.2.2'></textarea>

    <button class="btn btn-lg btn-in pull-right" type='submit' ng-click="updateSettings()">Save</button>
  </form>
</div>
</modal-dialog>
<!--*********************  END SETTINGS MODAL CONTENT *******************************-->